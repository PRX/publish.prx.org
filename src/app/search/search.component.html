<div class="main">
  <section>
    <header>
      <h2>Do a search for...</h2>

      <publish-search-story
        [searchSeriesId]="searchSeriesId"
        [allSeriesIds]="allSeriesIds"
        [allSeries]="allSeries"
        (searchStoriesByText)="searchStoriesByText($event)"
        (searchStoriesBySeries)="searchStoriesBySeries($event)">
      </publish-search-story>

      <div>
        <button class="tab">Series</button>
        <button (click)="search(1)" class="tab active" disabled>Stories</button>

        <span class="pages">
          <button *ngIf="totalCount && pages?.length > 1" (click)="search(1, totalCount)" class="btn-link">View All {{totalCount}} &raquo;</button>
          <button disabled *ngIf="totalCount && pages?.length === 1" class="btn-link">Viewing {{totalCount > 1 ? 'all ' + totalCount : totalCount}}</button>
        </span>

        <span *ngIf="pages?.length > 1" class="pages">
          <button [disabled]="currentPage === 1" (click)="search(currentPage - 1)" class="btn-link">&lt;</button>
          <button *ngFor="let page of pages | slice:pagesBegin:pagesEnd;"
                  [disabled]="page === currentPage" [ngClass]="{'active': page === currentPage}"
                  (click)="search(page)"
                  class="btn-link">{{page}}</button>
          <button disabled *ngIf="pages.length > showNumPages" class="btn-link">of {{pages.length}}</button>
          <button [disabled]="currentPage === pages?.length" (click)="search(currentPage + 1)" class="btn-link">&gt;</button>
        </span>
      </div>
    </header>

    <publish-spinner *ngIf="!isLoaded"></publish-spinner>
    <publish-story-list
      [noStories]="noStories"
      [stories]="stories"
      [storyLoaders]="storyLoaders"></publish-story-list>
  </section>
</div>
